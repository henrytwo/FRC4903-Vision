<html>
<head>

    <title>
        FRC 4903 Vision Dashboard
    </title>

    <script src="jquery.min.js"></script>

    <style>
        #upper-highlight {{
            height: 20px;
            background-color: #000033;
            color: white;
            padding-left: 30px;
            padding-right: 30px;
            padding-top: 5px;
            padding-bottom: 5px;
        }}

        * {{
            font-family: Arial;
        }}

        h1, h2, h3, h4 {{
            margin: 0;
        }}

        #hide {{
            top: 20px;
            right: 30px;
            position: absolute;
        }}

        #reboot {{
            top: 4px;
            right: 20px;
            position: absolute;
        }}

        #frame-picker0 {{
            top: 4px;
            left: 300px;
            position: absolute;
        }}

        #frame-picker1 {{
            top: 4px;
            left: 380px;
            position: absolute;
        }}

        #frame-picker2 {{
            top: 4px;
            left: 460px;
            position: absolute;
        }}
    </style>


</head>
<body style="padding: 0; margin: 0; background-color: black;">
    <div id="upper-highlight">
        <h3>FRC 4903 Vision Dashboard</h3>


        <select id="frame-picker0">
            <option value="0" selected>Cam 0</option>
            <option value="1">Cam 1</option>
            <option value="2">Cam 2</option>
        </select>

        <select id="frame-picker1">
            <option value="0">Cam 0</option>
            <option value="1" selected>Cam 1</option>
            <option value="2">Cam 2</option>
        </select>

        <select id="frame-picker2">
            <option value="0" selected>Cam 0</option>
            <option value="1">Cam 1</option>
            <option value="2" selected>Cam 2</option>
        </select>



        <!--<input type="button" id="hide" value="Hide" />-->
        <input type="button" id="reboot" value="Reboot Co-Processor" />

    </div>

    <!-- UGLY CODE WARNING!!!! -->

    <div style="width: 100vw; height: calc(100vh - 30px);">
        <div style="height: calc(100vh - 30px); width: calc(9 * (100vh - 30px)/16); background-color: rebeccapurple; float: left;">
            {CAM0}

        </div>

        <div style="height: calc(100vh - 30px); width: calc(100vw - 9 * (100vh - 30px)/16); display: inline-block; float: right;">

            <div style="height: calc(0.7 * (100vh - 30px)); width: calc(16 * (0.7 * (100vh - 30px)) / 9); background-color: darkblue">
                {CAM1}
            </div>

            <div style="height: calc(0.3 * (100vh - 30px)); width: calc(16 * (0.3 * (100vh - 30px)) / 9); background-color: green; float: left">
                {CAM2}
            </div>



        </div>
    </div>


</body>

<script>

    $('#frame-picker0').change(function() {{
        $('#frame-0').attr("src", window.location.origin + '/' + $('#frame-picker0').val() + '.mjpg');
    }});

    $('#frame-picker1').change(function() {{
        $('#frame-1').attr("src", window.location.origin + '/' + $('#frame-picker1').val() + '.mjpg');
    }});


    $('#frame-picker2').change(function() {{
        $('#frame-2').attr("src", window.location.origin + '/' + $('#frame-picker2').val() + '.mjpg');
    }});



    $('#hide').click(function() {{
        $("#upper-highlight").hide();
    }});


    $('#flip').click(function() {{
       $.get('flip', function(data) {{

       }})
    }});

    $('#reboot').click(function() {{
        var response = confirm('Are you sure you want to reboot? This may take up to 1 minute!');

        if (response) {{

            var doubleConfirm = confirm('ARE YOU ABSOLUTELY SURE YOU WANT TO REBOOT?');

            if (doubleConfirm) {{
                $.get('reboot', function (data) {{
                    {{
                        alert('Reboot command issued.')

                    }}
                }})
            }}
        }}
    }});

</script>
</html>